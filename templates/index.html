<!DOCTYPE html>
<html>
<head>
    <title>Incident Simulator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="p-4">
    <div class="container">
        <h1 class="mb-4">Cybersecurity Incident Response Simulator</h1>
        <form method="POST" action="/simulate" class="mb-4">
            <div class="mb-3">
                <label>Incident Type</label>
                <select class="form-select" name="incident_type">
                    {% for key in incidents.keys() %}
                        <option value="{{ key }}" {% if selected == key %}selected{% endif %}>{{ key }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-3">
                <label>Severity</label>
                <select class="form-select" name="severity">
                    <option>Low</option>
                    <option>Medium</option>
                    <option>High</option>
                </select>
            </div>
            <div class="mb-3">
                <label>Custom Description (Optional)</label>
                <textarea class="form-control" name="description"></textarea>
            </div>
            <button class="btn btn-primary">Simulate</button>
        </form>

        {% if response %}
        <div class="card p-3">
            <h3>Response Plan</h3>
            <p><strong>Containment:</strong> {{ response.Containment }}</p>
            <p><strong>Recovery:</strong> {{ response.Recovery }}</p>
            <p><strong>NIST:</strong> {{ response.NIST }}</p>
            <p><strong>ASD 8:</strong> {{ response["ASD 8"] }}</p>
            <h4 class="mt-3">Timeline:</h4>
            <ul>
                {% for step in timeline %}
                    <li><strong>{{ step.step }}</strong> - {{ step.duration }}</li>
                {% endfor %}
            </ul>
        </div>
        <a href="/download-report" class="btn btn-success mt-3">Download PDF Report</a>
        {% endif %}

        <a href="/logs" class="btn btn-secondary mt-4">View All Incident Logs</a>
    </div>
</body>
</html>
